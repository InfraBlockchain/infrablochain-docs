---
title: 모니터링
description:  Substrate 노드와 Polkadot 생태계에 대한 기본 텔레메트리 개요를 제공합니다.
keywords:
---

네트워크 운영 및 성능 모니터링은 건강하고 안정적이며 보안 높은 생태계를 유지하는데 중요한 부분입니다.
기본적으로, Substrate 노드는 네트워크의 각 노드 운영에 대한 자세한 정보를 자동으로 수집하고 전송하는 낮은 수준의 **텔레메트리** 구성 요소를 제공합니다.
백엔드 텔레메트리 정보는 발생 즉시 실시간으로 엔드포인트로 스트리밍되므로 시스템 동작을 관찰, 모니터링 및 경고할 수 있습니다.

개발자나 노드 운영자로서, 낮은 수준의 텔레메트리 구성 요소가 컴퓨터 및 네트워크 운영에 대한 정보를 어떻게 제공하는가에 대한 세부사항을 알 필요는 없습니다.
높은 수준에서, 각 공개 노드에서 수집된 정보는 기본 텔레메트리 서버로 전송되어 프론트엔드 대시보드에서 집계됩니다.

다음 다이어그램은 워크플로우의 단순화된 개요를 제공합니다.

![Substrate 노드의 기본 텔레메트리](/media/images/docs/infrablockchain/devops/telemetry-overview.png)

## 텔레메트리 데이터 보기

[Polkadot 텔레메트리](https://telemetry.polkadot.io/) 대시보드는 현재 온라인 노드들이 어떻게 수행되고 있는지 실시간으로 보여줍니다.
사용 가능한 열 목록에서 보이는 열을 켜고 끄면서 표시하고자 하는 정보를 선택할 수 있습니다.

열 목록을 보고, 표시되는 열을 수정하려면 **설정**을 클릭하세요.

![Click Settings to modify the visible columns](/media/images/docs/infrablockchain/devops/list-view-control.png)

켜고 끌 수 있는 열에는 다음 요소들이 포함됩니다:

- **밸리데이터**: 밸리데이터(블록 생성자) 노드를 다른 노드와 구분하기 위한 지표

- **위치**: 노드의 위치

- **실행**: 노드에서 실행 중인 소프트웨어의 버전

- **네트워크 ID**: 노드의 퍼블릭 네트워크 식별자

- **피어 카운트**: 노드에 연결된 피어의 수

- **큐에 있는 트랜잭션**: 블록 작성자를 기다리는 Ready queue에 있는 트랜잭션 수

- **업로드 대역폭**: 최근 업로드 활동을 MB/s로 표시하는 그래프

- **다운로드 대역폭**: 최근 다운로드 활동을 MB/s로 표시하는 그래프

- **상태 캐시 크기**: 상태 캐시 크기를 MB로 표시하는 그래프

- **블록**: 노드가 피어들과 동기화되고 있는지 확인하기 위해, 현재 가장 좋은 블록 번호를 표시

- **블록 해시**: 노드의 현재 가장 좋은 블록 번호에 대한 블록 해시

- **확정된 블록**: 노드가 피어들과 동기화되고 있는지 확인하기 위해, 가장 최근에 확정된 블록 번호를 표시

- **확정된 블록 해시**: 가장 최근에 확정된 블록 번호에 대한 블록 해시

- **블록 시간**: 블록 사이의 블록 실행 시간

- **블록 전파 시간**: 노드가 가장 최근 블록을 가져오는 데 걸린 시간 

- **마지막 블록 시간**: 노드가 가장 최근 블록을 작성하는 데 걸린 시간

- **노드 가동 시간**: 드가 재시작 없이 온라인 상태로 있었던 일 수

### 노드 정보 고정하기

대시보드 목록에 표시된 노드의 라인을 클릭하여 대시보드에서 하나 이상의 노드 정보를 보이게 할 수 있습니다.
예를 들어, 다른 노드의 정보가 스크롤될 동안 두 노드의 정보를 보이게 하고 싶다면, 목록에서 노드를 선택하고 정보를 고정할 수 있습니다.

![Keep information for selected nodes displayed](/media/images/docs/infrablockchain/devops/pin-nodes.png)

### 지도에 노드 표시하기
노드 목록 대신에, 지도에 노드를 표시할 수도 있습니다.
지도는 노드가 위치한 곳, 실시간으로 블록이 생성되고 가져오는 곳, 그리고 노드의 높은 지리적 집중도를 시각적으로 나타냅니다.
위치가 알려진 노드만 지도에 표시됩니다.

지도에 표시하려면 **지도**를 클릭하세요.

![Display nodes on a global map](/media/images/docs/infrablockchain/devops/node-map-view.png)

위 지도상의 어떤 노드 위치 위로 마우스를 올리면 노드 이름, 위치, 최고 블록 번호, 최고 블록 해시, 블록 시간 통계 등 노드에 대한 정보의 부분 집합을 표시할 수 있습니다.

### 노드 통계 표시하기

개별 노드에 대한 정보 외에도, 특정 속성을 공유하는 노드의 수와 비율을 설명하는 통계를 볼 수 있습니다.
예를 들어, Polkadot의 각 릴리스를 사용하는 노드의 비율, 리눅스 운영 체제를 사용하는 노드의 비율 및 현재 배포된 가장 일반적인 배포판을 볼 수 있습니다.
또한 네트워크의 노드에서 CPU와 메모리 구성에 대한 통계도 볼 수 있습니다.

사용 가능한 전체 통계 세트를 보려면 **통계**를 클릭하세요.

![View statistics across nodes](/media/images/docs/infrablockchain/devops/node-statistics.png)

사용 가능한 통계에는 네트워크의 노드에서 실행 중인 하드웨어와 소프트웨어에 대한 세부 정보가 포함됩니다:

- 소프트웨어 버전
- 운영 체제
- CPU 아키텍처 및 모델
- 물리적 CPU 코어의 수
- 총 메모리
- 노드의 가상 머신 여부
- 리눅스 배포판 및 커널 버전
- CPU 및 메모리 속도
- 디스크 속도

### 체인별 필터

기본적으로, 텔레메트리 대시보드는 Polkadot에 대한 정보를 표시하고 다른 체인의 부분 집합에 대한 빠른 링크를 제공합니다.
다른 체인의 정보를 표시하려면 **더 보기**를 클릭하고 다른 체인을 선택하세요.

![Select other chains](/media/images/docs/infrablockchain/devops/more-chains.png)

## 모니터링 스택 정의하기

기본 텔레메트리 대시보드는 백엔드 모니터링이나 프론트엔드 서비스를 호스팅하거나 구성할 필요 없이 노드 및 체인 운영에 대한 가시성을 제공합니다.
그러나 많은 프로젝트는 기본 텔레메트리 서버를 자체 백엔드 서버와 프론트엔드 대시보드로 보완하거나 대체합니다.

일반적으로, 자체 텔레메트리 서버를 설정하는 것은 **온체인 이벤트**와 개별 **노드 운영**에 대한 모니터링 및 알림 정책을 세팅하는 것을 포함합니다.

### 온체인 활동

특정 주소에서 제출된 트랜잭션, 현재 검증자 세트의 변경과 같은 특정 이벤트에 대한 온체인 활동을 모니터링할 수 있습니다.
온체인 모니터링은 일반적으로 특정 값 검사, 처리 지연 식별 또는 이벤트 타이밍 추적을 위해 RPC 노드에 연결하는 것을 포함합니다.
대부분의 경우, 모든 호스트의 요청을 처리하기 위해 두 개의 RPC 인스턴스만 있으면 됩니다.
그러나 공개 RPC 노드에 문제가 있는 경우 자체 RPC 서버를 운영하는 것이 좋습니다.
온체인 정보를 쿼리하는 애플리케이션의 예로는[polkabot](https://gitlab.com/Polkabot/polkabot)과 [polkadot-basic-notification](https://github.com/paritytech/polkadot-basic-notification)이 있습니다. 

### 노드 운영

네트워크에서 실행하는 각 노드를 모니터링하여 현재 블록 높이, 피어 투 피어 연결 수, CPU 사용량, 사용 가능한 여유 메모리 등 노드 작동에 대한 기본 정보를 확인해야 합니다.
기본적으로, Substrate는 `host:9615/metrics` 엔드포인트에서 대량의 유용한 메트릭을 노출합니다.
예를 들어, Substrate가 로컬에서 실행 중이라면, http://localhost:9615/metrics 엔드포인트에서 메트릭을 볼 수 있습니다.
이 엔드포인트는 간단한 키-값 형식을 사용하여 메트릭을 출력합니다.

예를 들어:

```text
polkadot_database_cache_bytes 0
```

그러나 키에는 설명 태그도 포함될 수 있습니다.

예를 들어:

```text
susbtrate_block_height{status="best"} 136
susbtrate_block_height{status="finalized"} 133
```

기본적으로 [메트릭](http://localhost:9615/metrics) 엔드포인트는 로컬 네트워크 인터페이스에서만 노출됩니다.

그러나 `--prometheus-external` 명령줄 옵션을 사용하여 노드를 시작함으로써 모든 인터페이스에 노출할 수 있습니다.

### 모니터링 도구 구성하기

모니터링 및 알림 정책을 설정하기 위해, 일반적으로 자체 모니터링 스택을 생성하기 위해 도구 세트를 구성합니다.
예를 들어, 기본 `메트릭` 엔드포인트에는 CPU, 메모리, 대역폭 사용과 같은 호스트 메트릭이 포함되어 있지 않으므로, 각 호스트에 Prometheus [node_exporter](https://github.com/prometheus/node_exporter) 를 설치하여 보완할 수 있습니다.
아래 다이어그램은 모니터링 스택으로 자주 사용되는 오픈 소스 도구 세트를 보여줍니다.

![Monitoring stack layers](/media/images/docs/infrablockchain/devops/monitoring-stack.png)

이 다이어그램에서는, 온체인 활동 및 노드 운영 모니터링을 위해 다음 도구가 구성되어 있습니다:

- **Prometheus**: 지정된 대상에서 지정된 간격으로 메트릭을 수집하는 모니터링 엔진으로, 정의한 규칙을 사용하여 수집된 데이터를 평가합니다. 시계열 데이터베이스는 대량의 데이터를 보유할 수 있으며 매우 빠르게 접근할 수 있습니다.

- **Grafana**: 데이터를 쿼리하고, 시각화하며, 대시보드와 그래프를 통해 분석할 수 있게 하는 관측 플랫폼입니다.

- **Node exporter**: 포트에서 수신 대기하는 프로세스로, Prometheus에 애플리케이션별 메트릭을 보고합니다.

- **Alertmanager**: 지정한 규칙에 따라 경고 알림을 생성하고 경로를 설정할 수 있는 도구로, 경고를 어디로 어떻게 보낼지 구성할 수 있습니다. 예를 들어, 경고 경고에는 즉시 메시지를 보내지만, 중요한 경고의 경우 당직 기술자에게 호출을 보낼 수 있습니다.

- **Loki**: 인프라의 모든 구성 요소에서 로그를 한 곳에서 보고 검색할 수 있는 확장 가능한 로그 집계 시스템입니다.

Prometheus, Grafana 및 node exporter를 사용하여 노드 모니터링을 설정하는 간단한 예는 [노드 매트릭 모니터링](/tutorials/build-a-blockchain/monitor-node-metrics/) 문서를 참고하세요. Loki 사용의 간소화된 예는 [원격 로깅](/deploy/deployment-options/#remote-logging) 문서를 참고하세요. 

### 텔레메트리 서버 변경하기

노드의 백엔드 모니터링 규칙을 설정한 후에는, 노드를 시작할 때 `--telemetry-url` 명령줄 옵션을 사용하여 텔레메트리 데이터를 전송하고자 하는 텔레메트리 서버를 지정할 수 있습니다. 
이 옵션은 여러 텔레메트리 엔드포인트를 지정하기 위해 여러 번 사용될 수 있습니다. 
`--telemetry-url` 명령줄 옵션을 지정하는 경우, 가장 적은 정보를 나타내는 레벨 0부터 가장 많은 정보를 나타내는 레벨 9까지, 메트릭의 자세한 정도를 지정해야 합니다.

예를 들어, 자신의 텔레메트리 서버 URL을 자세한 정도 레벨 5로 지정하려면 다음과 같은 명령을 실행합니다:

```bash
./target/release/node-template --dev \
  --telemetry-url "wss://192.168.48.1:9616 5" \
  --prometheus-port 9616 \
  --prometheus-external
```

텔레메트리의 백엔드 구성 요소 또는 자체 서버를 구성하는 방법에 대한 자세한 정보는  [substrate-텔레메트리](https://github.com/paritytech/substrate-telemetry) 문서 또는 쿠버네티스 배포를 위한 [텔레메트리 헬름 차트](https://github.com/paritytech/helm-charts/tree/main/charts/substrate-telemetry) 문서를 참조하세요.

## 텔레메트리 비활성화하기

텔레메트리는 기본적으로 모든 글로벌 체인 노드에서 활성화되어 있습니다. 
`--no-telemetry` 명령줄 옵션을 사용하여 노드가 Substrate 텔레메트리 서버에 연결되지 않도록 할 수 있습니다. 
예를 들어, 텔레메트리 데이터가 기본 텔레메트리 서버로 전송되는 것을 방지하려면 다음과 같은 명령을 실행합니다:

```bash
./target/release/node-template --chain myCustomChain \
  --no-telemetry
```
